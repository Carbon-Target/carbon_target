<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta content="Carbon target bilan carbone giec ademe environnment impact objectifs calcul" name="keywords" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <title>Carbon Target</title>
    <link href="/images/favicons/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link href="/images/favicons/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <link href="/images/favicons/favicon.ico" rel="shortcut icon" />
    <link href="/images/favicons.png" rel="apple-touch-icon" sizes="180x180" />
    <link href="style.css" rel="stylesheet" />
    <script type="module">
      import { Application, Controller } from "https://unpkg.com/@hotwired/stimulus/dist/stimulus.js"
      window.Stimulus = Application.start()
      
      Stimulus.register("carbon-item", class extends Controller {
        static targets = [ "quantity", "frequency", "result" ]
        static values = { emissionFactor: Number }
      
        initialize() {
          this.frequencyHash = { day: 365, week: 52, month: 12, year: 1 }
        }
      
        computeFrequencyFactor() {
          return this.frequencyHash[this.frequencyTarget.value]
        }
      
        updateResult() {
          let result = this.quantityTarget.value
            * this.computeFrequencyFactor()
            * this.emissionFactorValue
      
          if (result)
            result = Math.round(result)
      
          this.resultTarget.value = result || 0
          this.resultTarget.dispatchEvent(new Event('change'))
        }
      })
      
      Stimulus.register("carbon-recap", class extends Controller {
        static targets = [ "item", "total" ]
      
        // Sums the result of each line & updates the total
        updateResult() {
          let result = 0
          this.itemTargets.forEach(item => {
            result += parseInt(item.value)
          })
      
          this.totalTarget.innerHTML = result
        }
      })
    </script>
    <script src="javascript.js" type="text/javascript"></script>
  </head>
</html>
<body class="container block is-max-desktop">
  <section class="section" data-controller="carbon-recap">
    <div class="content has-text-centered-desktop pb-6">
      <h1 class="title is-1">
        Bienvenue sur Carbon Target&nbsp;!
      </h1>
      <p>
        Une vie à 2 tonnes, qu'est ce que ça veut dire concrètement&nbsp;?
      </p>
      <p>
        Ce projet a pour but d'illustrer la nécessaire radicalité du changement de nos modes de vie à tous les niveaux.
      </p>
      <p>
        Le calcul ne se base que sur 4 besoins humains "essentiels" (se déplacer, se nourrir, se loger, s'équiper) et n'est donc bien évidemment pas exhaustif.
      </p>
      <p>
        Mais sans être exhaustif, vous verrez que c'est déjà loin d'être évident de tenir le fameux objectif des 2 tonnes&nbsp;!
      </p>
    </div>
    <section class="level is-mobile">
      <div class="box level-item has-text-centered has-background-primary-light">
        <div>
          <p class="heading">
            Calcul
          </p>
          <p class="title">
            <span data-carbon-recap-target="total">0</span><span class="is-hidden-tablet">kg</span><span class="is-hidden-mobile">&nbsp;kilos</span>
          </p>
        </div>
      </div>
      <div class="level-item has-text-centered">
        <div>
          <p class="heading">
            VS
          </p>
        </div>
      </div>
      <div class="box level-item has-text-centered has-background-danger-light">
        <div>
          <p class="heading">
            Cible
          </p>
          <p class="title">
            2<span class="is-hidden-tablet">t</span><span class="is-hidden-mobile">&nbsp;tonnes</span>
          </p>
        </div>
      </div>
    </section>
    <div class="block">
      <h2 class="title is-3">
        Se déplacer
      </h2>
      <ul>
        <li data-carbon-item-emission-factor-value="0.198" data-controller="carbon-item">
          <label class="label mt-3" for="car-gas">Voiture essence</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="car-gas" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        km/semaine
                      </option>
                      <option value="month">
                        km/mois
                      </option>
                      <option value="year">
                        km/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="0.103" data-controller="carbon-item">
          <label class="label mt-3" for="car-elec">Voiture électrique</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="car-elec" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        km/semaine
                      </option>
                      <option value="month">
                        km/mois
                      </option>
                      <option value="year">
                        km/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="0.00529" data-controller="carbon-item">
          <label class="label mt-3" for="train-france">Train France</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="train-france" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        km/semaine
                      </option>
                      <option value="month">
                        km/mois
                      </option>
                      <option value="year">
                        km/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="0.05" data-controller="carbon-item">
          <label class="label mt-3" for="train-euro">Train Europe</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="train-euro" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        km/semaine
                      </option>
                      <option value="month">
                        km/mois
                      </option>
                      <option value="year">
                        km/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="0.808" data-controller="carbon-item">
          <label class="label mt-3" for="plane-short">Avion court courrier</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="plane-short" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        km/semaine
                      </option>
                      <option value="month">
                        km/mois
                      </option>
                      <option value="year">
                        km/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="0.589" data-controller="carbon-item">
          <label class="label mt-3" for="plane-mid">Avion moyen courrier</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="plane-mid" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        km/semaine
                      </option>
                      <option value="month">
                        km/mois
                      </option>
                      <option value="year">
                        km/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="0.472" data-controller="carbon-item">
          <label class="label mt-3" for="plane-long">Avion long courrier</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="plane-long" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        km/semaine
                      </option>
                      <option value="month">
                        km/mois
                      </option>
                      <option value="year">
                        km/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div class="block">
      <h2 class="title is-3">
        Se nourrir
      </h2>
      <ul>
        <li data-carbon-item-emission-factor-value="7.26" data-controller="carbon-item">
          <label class="label mt-3" for="meal-beef">Repas à base de boeuf</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="meal-beef" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        repas/semaine
                      </option>
                      <option value="month">
                        repas/mois
                      </option>
                      <option value="year">
                        repas/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="1.58" data-controller="carbon-item">
          <label class="label mt-3" for="meal-chicken">Repas à base de poulet</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="meal-chicken" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        repas/semaine
                      </option>
                      <option value="month">
                        repas/mois
                      </option>
                      <option value="year">
                        repas/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="0.51" data-controller="carbon-item">
          <label class="label mt-3" for="meal-veg">Repas végétariens</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="meal-veg" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        repas/semaine
                      </option>
                      <option value="month">
                        repas/mois
                      </option>
                      <option value="year">
                        repas/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div class="block">
      <h2 class="title is-3">
        S'équiper
      </h2>
      <ul>
        <li data-carbon-item-emission-factor-value="0.6" data-controller="carbon-item">
          <label class="label mt-3" for="clothes-new">Vêtements neufs</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="clothes-new" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        €/semaine
                      </option>
                      <option value="month">
                        €/mois
                      </option>
                      <option value="year">
                        €/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="0.6" data-controller="carbon-item">
          <label class="label mt-3" for="furniture-new">Meubles neufs</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="furniture-new" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        €/semaine
                      </option>
                      <option value="month">
                        €/mois
                      </option>
                      <option value="year">
                        €/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
        <li data-carbon-item-emission-factor-value="0.4" data-controller="carbon-item">
          <label class="label mt-3" for="elec-new">Electronique neuf</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="elec-new" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="week">
                        €/semaine
                      </option>
                      <option value="month">
                        €/mois
                      </option>
                      <option value="year">
                        €/an
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div class="block">
      <h2 class="title is-3">
        Se loger
      </h2>
      <ul>
        <li data-carbon-item-emission-factor-value="5.99" data-controller="carbon-item">
          <label class="label mt-3" for="clothes-new">Consommation électrique logement</label>
          <div class="columns is-mobile">
            <div class="column is-three-fifths">
              <div class="field has-addons">
                <div class="control">
                  <input class="input" data-action="keyup-&gt;carbon-item#updateResult" data-carbon-item-target="quantity" id="clothes-new" type="number" />
                </div>
                <div class="control">
                  <div class="select">
                    <select data-action="change-&gt;carbon-item#updateResult" data-carbon-item-target="frequency">
                      <option value="year">
                        m²
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <div class="column"></div>
            <div class="column is-one-fifth">
              <div class="field">
                <div class="control">
                  <input class="input has-text-centered" data-action="change-&gt;carbon-recap#updateResult" data-carbon-item-target="result" data-carbon-recap-target="item" readonly="readonly" type="number" value="0" />
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </section>
</body>
